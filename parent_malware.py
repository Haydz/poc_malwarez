#! /usr/bin/python

import time
from scapy.all import *


def custom_action(packet):
 global counter
 counter += 1
 return 'Packet #{}: {} ==> {}'.format(counter, packet[0][1].src, packet[0][1].dst)

print(" Running Arp Ping")
#arpPingIPList = ["127.0.0.1"]
#arping(IPRange)
#ans, unans = srp(Ether(dst="ff:ff:ff:ff:ff:ff") / ARP(pdst=IPRange), timeout=5)

a = IP(ttl=10)
print(a.show)
print("Source:", a.src)
print("TTL:", a.ttl)
#ans,unans = srp(IP(src="192.168.0.11",dst="192.168.0.15")/ICMP()/"Hello World")
for x in range( 0, 2):
 ans,unans=srp(Ether(src="AA:AA:AA:AA:BB:BB",dst="ff:ff:ff:ff:ff:ff")/ARP(pdst="192.168.0.5"),timeout=2)

#for snd,rcv in ans:
# print (rcv.sprintf(r"%Ether.src% & %ARP.psrc%\\"))
# print("finished")
 
#print("Sniffing")( 
#sniff(lfilter=lambda d: d.src == "AA:AA:AA:AA:BB:BB:BB:BB", prn=custom_action)